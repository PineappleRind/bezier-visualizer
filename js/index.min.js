!function(){let $=document.querySelector.bind(document),k=(b,c,a)=>Math.round(((1-a)*b+a*c)*100)/100;var b={lines:1,midpoints:2,trail:4,controlpoints:8,finalmidpoint:16,total(){let c=0;for(let a in b)b[a]&&"number"==typeof b[a]&&(c+=b[a]);return c},compare:b=>(a.settings.show&b)===b},a={data:[[331,351],[38,351],[331,14],[38,14]],presets:[{name:"Default",data:[[30,250],[250,250],[30,30],[250,30]],show:null},{name:"Bow",data:[[143,323],[482,25],[54,21],[113,373],[231,298],[482,25],[54,21],[279,300],[371,381],[483,25],[54,20],[357,324]],show:null},{name:"Cursive f",data:[[193,313],[513,246],[42,42],[410,6],[120,586],[567,521],[53,339],[332,283]],show:null},{name:"Infinity Warp",data:[[683,396],[592,368],[737,382],[799,228],[764,49],[639,8],[456,144],[260,331],[97,398],[9,282],[16,91],[118,0],[288,93],[486,284],[618,384],[775,330],[796,142],[719,8],[565,50],[370,230],[158,393],[48,367],[0,198],[50,31],[185,19],[373,174],[568,353],[722,391],[796,254],[774,67],[660,2],[483,119],[285,310],[115,400],[15,306],[10,114],[100,2],[263,71],[460,259],[642,393],[765,349],[799,168],[735,17],[589,34],[396,204],[205,370],[62,380],[1,225],[38,46],[163,9]],show:b.midpoints},{name:"Circle Warp",data:[[300,600],[552,462],[573,175],[342,3],[73,104],[12,385],[216,588],[495,528],[597,256],[424,27],[137,48],[0,301],[139,553],[426,572],[597,341],[495,72],[214,13],[12,217],[75,498],[345,597],[574,422],[551,136],[297,0],[46,140],[28,427],[260,597],[529,494],[587,212],[381,11],[101,76],[4,346],[179,574],[465,550],[600,296],[459,45],[172,29],[2,262],[107,530],[389,587],[589,380],[524,100],[252,4],[25,180],[50,467],[305,600],[555,458],[571,170],[337,2],[70,108],[14,390],[221,589],[501,523],[596,251],[419,25],[132,51],[0,307],[144,556],[431,570],[598,336],[491,69],[209,14],[10,223],[78,502],[350,596],[576,418],[548,131],[292,0],[43,145],[31,432],[266,598],[532,490],[585,207],[376,10],[97,79],[4,352],[184,577],[470,547],[600,291],[454,43],[167,31],[2,267],[111,533],[394,585],[591,375],[520,96],[247,5],[23,185],[53,471],[311,600],[558,453],[568,166],[332,2],[66,112],[16,395],[226,591],[505,519],[595,246],[414,22],[128,54],[0,312]],show:b.midpoints}],settings:{speed:.002,ease:"easeInOutQuad",show:b.total(),colorAlgorithm:"goldenAngle",noCookies:void 0}};let e={" "(){s=!s,u<=.01?t.clear():u>=.99&&d(),i()},Enter(){$("#controls").classList.toggle("hidden"),$("#quickActions").classList.toggle("hidden")}};for(let l in e)document.documentElement.addEventListener("keyup",function(a){a.key===l&&e[l](a)});let m=[];var c={getData:function(){return JSON.parse(localStorage.getItem("bezierSaveData"))},set:function(){return a.noCookies?void localStorage.clear():(j(),localStorage.setItem("bezierSaveData",JSON.stringify(a)))}};c.getData()?a=c.getData():c.set();let f=b=>{$(".banner").classList.add("form-hidden"),setTimeout(function(){$(".banner").remove()},300),a.noCookies=b,c.set()};$("#bannerClose").onclick=()=>void f(!1),$("#bannerDontStore").onclick=()=>void f(!0),!1===a.noCookies&&f(!1);let n={goldenAngle:a=>`hsl(${137.50776405*a},100%,50%)`,rainbow:a=>`hsl(${20*a},100%,50%)`,grayscale:b=>`hsl(0,0%,${b/a.data.length*100}%)`};var o={easeInOutQuad:a=>a<.5?2*a*a:1-Math.pow(-2*a+2,2)/2,easeInOutExpo:a=>0===a?0:1===a?1:a<.5?Math.pow(2,20*a-10)/2:(2-Math.pow(2,-20*a+10))/2,easeInOutQuart:a=>a<.5?8*a*a*a*a:1-Math.pow(-2*a+2,4)/2,bounce:a=>a<.36363636363636365?7.5625*a*a:a<.7272727272727273?7.5625*(a-=.5454545454545454)*a+.75:a<.9090909090909091?7.5625*(a-=.8181818181818182)*a+.9375:7.5625*(a-=.9545454545454546)*a+.984375,linear:a=>a},p=[];function q(b,c){let a=document.createElement("DIV");a.classList.add("toast"),a.classList.add(c),a.innerHTML=b,setTimeout(function(){a.classList.add("showing"),setTimeout(function(){a.classList.remove("showing"),setTimeout(function(){a.remove()},500)},3e3)}),document.body.appendChild(a)}a.data.forEach(function(c,b){p.push(n[a.settings.colorAlgorithm](b))});let r=a.data.length-1,s=!0;var g={element:$("#canvas"),context:$("#canvas").getContext("2d"),clear:function(){g.context.clearRect(0,0,g.element.width,g.element.height)}},t={element:$("#canvas2"),context:$("#canvas2").getContext("2d"),clear:function(){t.context.clearRect(0,0,t.element.width,t.element.height)}},u=0,v=1;function w(b,d){v++,p.push(n[a.settings.colorAlgorithm](v)),a.data.push([b,d]),r=a.data.length-1,G(),c.set()}function h(){g.element.setAttribute("height",window.innerHeight),g.element.setAttribute("width",window.innerWidth),t.element.setAttribute("height",window.innerHeight),t.element.setAttribute("width",window.innerWidth)}h(),onresize=()=>{h(),G()};let x={point(b,c,d,a){g.context.beginPath(),g.context.arc(b,c,d,0,2*Math.PI,!0),g.context.closePath(),a?g.context.fillStyle=a:g.context.fillStyle="#ffffff",g.context.fill()},line(a,b,c,d){g.context.beginPath(),g.context.strokeStyle="#ffffff",g.context.moveTo(a,b),g.context.lineTo(c,d),g.context.stroke()},trail(c,d,e,f){if(!b.compare(b.trail))return;(e||f)&&!(u<.03)||(e=c,f=d);let{context:a}=t,i=(a,b)=>Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),g=i({x:e,y:f},{x:c,y:d});if(g>2*Math.PI)for(let h=0;h<g;h++)a.beginPath(),a.fillStyle="#ffffff",a.arc(k(e,c,h/g),k(f,d,h/g),10,0,2*Math.PI,!0),a.fill();a.beginPath(),a.fillStyle="#ffffff",a.arc(c,d,10,0,2*Math.PI,!0),a.fill()}};function i(){!0===s?(window.requestAnimationFrame(z),$("#quickPlay").classList.add("playing")):(window.cancelAnimationFrame(z),$("#quickPlay").classList.remove("playing")),$("#playBtn").innerHTML=$("#quickPlay").innerHTML=s?"Stop":"Play"}function d(){s?window.cancelAnimationFrame(z):window.requestAnimationFrame(z),u=0,g.clear(),t.clear(),s=!0,G()}$("#minimize").onclick=a=>{a.target.parentElement.classList.toggle("hidden"),a.target.parentElement.nextElementSibling.classList.toggle("hidden")},$("#playBtn").onclick=$("#quickPlay").onclick=a=>{s=!s,u<=.01&&t.clear(),i()},$("#replayBtn").onclick=d,$("#quickReplay").onclick=d,$("#resetCurveBtn").onclick=function(){a.data=[[331,351],[38,351],[331,14],[38,14]],c.set()},$("#animationSpeed").oninput=b=>a.settings.speed=b.target.value/1e3,i(),function(){let e=document.querySelectorAll(".showCheckbox");for(let d=0;d<e.length;d++){let c=e[d];c.checked=!1,b.compare(b[c.getAttribute("id")])&&(c.checked=!0)}}();let y=[];function z(){g.clear(),a.settings.ease||(a.settings.ease="quadraticEaseInOut"),$("#speedometer").innerHTML="t="+o[a.settings.ease](u).toFixed(3),u+=a.settings.speed,function(e){r=a.data.length-1,m=Array.from({length:r},()=>[]);for(let b=0;b<r;b++)for(let c=0;c<r-b;c++){let d=0===b?a.data:m[b-1];m[b].push([k(d[c][0],d[c+1][0],e),k(d[c][1],d[c+1][1],e)])}}(o[a.settings.ease](u));let b=H();x.trail(b[0],b[1],y[0],y[1]),y=b,G(),window.cancelAnimationFrame(z),u>=1|| !1===s?(s=!1,i()):window.requestAnimationFrame(z)}var A=!1,B=-1,C=-1;function D(f){if(!0===A){var d=f.clientX,e=f.clientY;if(-1!=B){h(B);return}for(var b=0;b<a.data.length;b++)if(!0===F(d,e,b)){if(-1==B&&(B=b),d<0||e<0||d>window.innerWidth||e>window.innerHeight)break;h(b);break}}function h(b){a.data[b][0]=d,a.data[b][1]=e,g.clear(),G(),c.set()}}function E(a,c){var b=a.indexOf(c);return b> -1&&a.splice(b,1),a}function F(d,e,b){let{data:c}=a;return(d>=c[b][0]&&d<=c[b][0]+10||d<=c[b][0]&&d>=c[b][0]-10)&&(e>=c[b][1]&&e<=c[b][1]+10||e<=c[b][1]&&e>=c[b][1]-10)||B===b}function G(){let{data:d,settings:e}=a;if(b.compare(b.lines))for(var c=0;c<d.length-1;c++)x.line(d[c][0],d[c][1],d[c+1][0],d[c+1][1]);for(var c=0;c<d.length;c++)b.compare(b.controlpoints)&&x.point(d[c][0],d[c][1],10,p[c])}function H(){let{show:f}=a.settings;for(let c=0;c<m.length;c++)for(let d=0;d<m[c].length;d++){let e=3;if(c===m.length-1&&b.compare(b.finalmidpoint)&&(e=10),(b.compare(b.midpoints)||10==e&&b.compare(b.finalmidpoint))&&x.point(m[c][d][0],m[c][d][1],e),b.compare(b.lines)&&d>0&&x.line(m[c][d][0],m[c][d][1],m[c][d-1][0],m[c][d-1][1]),c===m.length-1)return[m[c][d][0],m[c][d][1]]}}function j(){$("#saveDataTextarea").value=JSON.stringify(a)}onmousedown=function(){A=!0},ontouchstart=function(){A=!0},onmouseup=function(){A=!1,B=-1,C=-1},onmousemove=function(a){D(a)},ontouchmove=function(a){D(a.touches[0])},g.element.ondblclick=function(h){for(var d=h.clientX,e=h.clientY,f=0,b=0;b<a.data.length;b++){if(!0===F(d,e,b)&&a.data.length<=2){q("You can't have less than 2 points","info");break}if(!0===F(d,e,b)&&a.data.length>2){B=b,a.data=E(a.data,a.data[b]),g.clear(),c.set(),r=a.data.length-1,G(),B=-1;break}if(f++,b==a.data.length-1&&f==a.data.length-1)break;if(b==a.data.length-1&&f==a.data.length){w(d,e);break}}},$("#easeOption").oninput=function(){a.settings.ease=$("#easeOption").value,c.set()},oninput=e=>{let d=e.target;if("TEXTAREA"===d.tagName)return;"colorOption"===d.id&&(a.settings.colorAlgorithm=e.target.value,p=[],a.data.forEach(function(c,b){p.push(n[a.settings.colorAlgorithm](b))}),c.set());let f=d.getAttribute("id");a.settings.show^=b[f],c.set()},$("#animationSpeed").value=1e3*a.settings.speed,$("#colorOptionWrapper").innerHTML=function(){let c=`<select id="colorOption">      `;for(let b in n)selected="",a.settings.colorAlgorithm===b&&(selected="selected"),c+=`<option value="${b}" name="${b}" ${selected}>${b}</option>          `;return c+`      </select>`}(),$("#loadSaveDataBtn").onclick=b=>void function(d){d=d.previousElementSibling.previousElementSibling;try{var b=JSON.parse(d.value)}catch(e){q('Invalid data structure<br><small style="font-weight:200"> '+e+"</small>","error");return}if(b.data.length<=1)return q("Invalid save code: no data","error","error");for(let c=0;c<b.data.length;c++)if(2!=b.data[c].length)return q('Invalid save code <br><small style="font-weight:200">Data point '+(c+1)+" has invalid coordinates</small>","error");a=b,q("Successfully loaded save code","success")}(b.target),j(),$("#quickPlay").onclick=()=>{u>=.99?(d(),window.cancelAnimationFrame(z)):(s=!s,i())}}()