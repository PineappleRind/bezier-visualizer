function $(t){return document.getElementById(t)}function lerp(t,a,e){return Math.round(100*((1-e)*t+e*a))/100}function easeInOutQuad(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}function easeInOutExpo(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}function easeInOutQuart(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}function bounce(t){const a=7.5625,e=2.75;return t<1/e?a*t*t:t<2/e?a*(t-=1.5/e)*t+.75:t<2.5/e?a*(t-=2.25/e)*t+.9375:a*(t-=2.625/e)*t+.984375}function linear(t){return t}var saveData={data:[[331,351],[38,351],[331,14],[38,14]],presets:[{name:"Default",data:[[30,250],[250,250],[30,30],[250,30]],show:null},{name:"Bow",data:[[143,323],[482,25],[54,21],[113,373],[231,298],[482,25],[54,21],[279,300],[371,381],[483,25],[54,20],[357,324]],show:null},{name:"Cursive f",data:[[193,313],[513,246],[42,42],[410,6],[120,586],[567,521],[53,339],[332,283]],show:null},{name:"Infinity Warp",data:[[683,396],[592,368],[737,382],[799,228],[764,49],[639,8],[456,144],[260,331],[97,398],[9,282],[16,91],[118,0],[288,93],[486,284],[618,384],[775,330],[796,142],[719,8],[565,50],[370,230],[158,393],[48,367],[0,198],[50,31],[185,19],[373,174],[568,353],[722,391],[796,254],[774,67],[660,2],[483,119],[285,310],[115,400],[15,306],[10,114],[100,2],[263,71],[460,259],[642,393],[765,349],[799,168],[735,17],[589,34],[396,204],[205,370],[62,380],[1,225],[38,46],[163,9]],show:{lines:!1,midpoints:!0,trail:!1,controlpoints:!1,finalmidpoint:!1}},{name:"Circle Warp",data:[[300,600],[552,462],[573,175],[342,3],[73,104],[12,385],[216,588],[495,528],[597,256],[424,27],[137,48],[0,301],[139,553],[426,572],[597,341],[495,72],[214,13],[12,217],[75,498],[345,597],[574,422],[551,136],[297,0],[46,140],[28,427],[260,597],[529,494],[587,212],[381,11],[101,76],[4,346],[179,574],[465,550],[600,296],[459,45],[172,29],[2,262],[107,530],[389,587],[589,380],[524,100],[252,4],[25,180],[50,467],[305,600],[555,458],[571,170],[337,2],[70,108],[14,390],[221,589],[501,523],[596,251],[419,25],[132,51],[0,307],[144,556],[431,570],[598,336],[491,69],[209,14],[10,223],[78,502],[350,596],[576,418],[548,131],[292,0],[43,145],[31,432],[266,598],[532,490],[585,207],[376,10],[97,79],[4,352],[184,577],[470,547],[600,291],[454,43],[167,31],[2,267],[111,533],[394,585],[591,375],[520,96],[247,5],[23,185],[53,471],[311,600],[558,453],[568,166],[332,2],[66,112],[16,395],[226,591],[505,519],[595,246],[414,22],[128,54],[0,312]],show:{lines:!1,midpoints:!0,trail:!1,controlpoints:!1,finalmidpoint:!1}}],show:{lines:!1,midpoints:!0,trail:!1,controlpoints:!1,finalmidpoint:!1},settings:{speed:.002,ease:"easeInOutQuad",show:{lines:!0,midpoints:!0,trail:!0,controlpoints:!0,finalmidpoint:!0},colorAlgorithm:"goldenAngle"}};let computed=[],root=document.documentElement;var save={getData:function(){return JSON.parse(localStorage.getItem("bezierSaveData"))},set:function(){return showSaveData(),localStorage.setItem("bezierSaveData",JSON.stringify(saveData))}};save.getData()?saveData=save.getData():save.set();let colorAlgorithms=["goldenAngle","rainbow","grayscale"];function goldenAngle(t){return`hsl(${137.50776405*t},100%,50%)`}function rainbow(t){return`hsl(${20*t},100%,50%)`}function grayscale(t){return`hsl(0,0%,${t/saveData.data.length*100}%)`}var colors=[];for(let t=0;t<saveData.data.length;t++)colors.push(window[saveData.settings.colorAlgorithm](t));function toast(t,a){let e=document.createElement("DIV");e.classList.add("toast"),e.innerHTML=t,e.classList.add(a),setTimeout(function(){e.classList.add("showing"),setTimeout(function(){e.classList.remove("showing"),setTimeout(function(){e.remove()},500)},3e3)}),document.body.appendChild(e)}let iterationCount=saveData.data.length-1;var playing=!0,canvas={element:$("canvas"),context:$("canvas").getContext("2d"),clear:function(){canvas.context.clearRect(0,0,canvas.element.width,canvas.element.height)}},trail={element:$("canvas2"),context:$("canvas2").getContext("2d"),clear:function(){trail.context.clearRect(0,0,canvas.element.width,canvas.element.height)}},t=0,colorIteration=1;function addPoint(t,a){colorIteration++,colors.push(rainbow(colorIteration)),t||(t=0),a||(a=0),saveData.data.push([t,a]),iterationCount=saveData.data.length-1,initialPoints(),save.set()}function com(t){iterationCount=saveData.data.length-1,computed=[];for(let t=0;t<iterationCount;t++)computed.push([]);for(let a=0;a<iterationCount;a++)for(let e=0;e<iterationCount-a;e++)0===a?computed[0].push([lerp(saveData.data[e][0],saveData.data[e+1][0],t),lerp(saveData.data[e][1],saveData.data[e+1][1],t)]):0!=a&&e<iterationCount-a&&computed[a].push([lerp(computed[a-1][e][0],computed[a-1][e+1][0],t),lerp(computed[a-1][e][1],computed[a-1][e+1][1],t)])}function point(t,a,e,n){canvas.context.beginPath(),canvas.context.arc(t,a,e,0,2*Math.PI,!0),canvas.context.closePath(),canvas.context.fillStyle=n||"#ffffff",canvas.context.fill()}function line(t,a,e,n){canvas.context.beginPath(),canvas.context.strokeStyle="#ffffff",canvas.context.moveTo(t,a),canvas.context.lineTo(e,n),canvas.context.stroke()}function evaluatePlaying(){!0===playing?(window.requestAnimationFrame(advance),$("playBtn").innerHTML="Stop"):(window.cancelAnimationFrame(advance),$("playBtn").innerHTML="Play",$("quickPlay").classList.toggle("playing"))}function replay(){!0===playing?window.cancelAnimationFrame(advance):window.requestAnimationFrame(advance),t=0,canvas.clear(),trail.clear(),playing=!0,initialPoints()}function advance(){canvas.clear(),saveData.settings.ease||(saveData.settings.ease="quadraticEaseInOut"),$("speedometer").innerHTML="t="+window[saveData.settings.ease](t).toFixed(2),t+=saveData.settings.speed,easedT=window[saveData.settings.ease](t),com(easedT);let a=drawMidPoints();drawTrail(a[0],a[1]),window.cancelAnimationFrame(advance),initialPoints(),t>=1||!1===playing?(window.cancelAnimationFrame(advance),playing=!1,$("playBtn")):window.requestAnimationFrame(advance)}function resetCurve(){saveData.data=[[331,351],[38,351],[331,14],[38,14]],save.set()}canvas.element.setAttribute("height",window.innerHeight),canvas.element.setAttribute("width",window.innerWidth),trail.element.setAttribute("height",window.innerHeight),trail.element.setAttribute("width",window.innerWidth),onresize=(()=>{canvas.element.setAttribute("height",window.innerHeight),canvas.element.setAttribute("width",window.innerWidth),trail.element.setAttribute("height",window.innerHeight),trail.element.setAttribute("width",window.innerWidth),initialPoints()}),evaluatePlaying(),updateCheckboxes();var mouseIsDown=!1,dragging=-1,draggingPoint=-1;function pointHandler(t){if(!0===mouseIsDown){var a=t.clientX,e=t.clientY;if(-1!=dragging)return void o(dragging);for(var n=0;n<saveData.data.length;n++)if(!0===intersectingPoints(a,e,n)){if(-1==dragging&&(dragging=n),a<0)break;if(e<0)break;if(a>window.innerWidth)break;if(e>window.innerHeight)break;o(n);break}}function o(t){saveData.data[t][0]=a,saveData.data[t][1]=e,canvas.clear(),initialPoints(),save.set()}}function removePointHandler(t){for(var a=t.clientX,e=t.clientY,n=0,o=0;o<saveData.data.length;o++){if(!0===intersectingPoints(a,e,o)&&saveData.data.length<=2){toast("You can't have less than 2 points","info");break}if(!0===intersectingPoints(a,e,o)&&saveData.data.length>2){dragging=o,saveData.data=arrRemove(saveData.data,saveData.data[o]),canvas.clear(),save.set(),iterationCount=saveData.data.length-1,initialPoints(),dragging=-1;break}if(n++,o==saveData.data.length-1&&n==saveData.data.length-1)break;if(o==saveData.data.length-1&&n==saveData.data.length){addPoint(a,e);break}}}function arrRemove(t,a){var e=t.indexOf(a);return e>-1&&t.splice(e,1),t}function intersectingPoints(t,a,e){return(t>=saveData.data[e][0]&&t<=saveData.data[e][0]+10||t<=saveData.data[e][0]&&t>=saveData.data[e][0]-10)&&(a>=saveData.data[e][1]&&a<=saveData.data[e][1]+10||a<=saveData.data[e][1]&&a>=saveData.data[e][1]-10)||dragging===e}function initialPoints(){if(1==saveData.settings.show.lines)for(var t=0;t<saveData.data.length-1;t++)line(saveData.data[t][0],saveData.data[t][1],saveData.data[t+1][0],saveData.data[t+1][1]);for(t=0;t<saveData.data.length;t++)!0===saveData.settings.show.controlpoints&&point(saveData.data[t][0],saveData.data[t][1],10,colors[t])}function drawMidPoints(){for(let t=0;t<computed.length;t++)for(let a=0;a<computed[t].length;a++){let e=3;if(t===computed.length-1&&!0===saveData.settings.show.finalmidpoint&&(e=10),(1==saveData.settings.show.midpoints||10==e&&1==saveData.settings.show.finalmidpoint)&&point(computed[t][a][0],computed[t][a][1],e),1==saveData.settings.show.lines&&a>0&&line(computed[t][a][0],computed[t][a][1],computed[t][a-1][0],computed[t][a-1][1]),t===computed.length-1)return[computed[t][a][0],computed[t][a][1]]}}function drawTrail(t,a){0!=saveData.settings.show.trail&&(trail.context.beginPath(),trail.context.fillStyle="#ffffff",trail.context.arc(t,a,10,0,2*Math.PI,!0),trail.context.closePath(),trail.context.fill())}function computeTextColor(t){var a="#"===t.value.charAt(0)?t.value.substring(1,7):t.value;let e=.299*parseInt(a.substring(0,2),16)+.587*parseInt(a.substring(2,4),16)+.114*parseInt(a.substring(4,6),16)>186?"black":"white";document.body.classList.contains(e)||("black"==e&&document.body.classList.contains("white")?document.body.classList.remove("white"):"white"==e&&document.body.classList.contains("black")?document.body.classList.remove("black"):document.body.classList.add(e))}function updateCheckboxes(){for(let t=0;t<document.querySelectorAll(".showCheckbox").length;t++){let a=document.querySelectorAll(".showCheckbox")[t],e=saveData.settings.show[Object.keys(saveData.settings.show)[t]];a.checked=!0===e}}function getColorSelectHTML(){let t='<select id="colorOption">\n      ';for(let a=0;a<colorAlgorithms.length;a++)selected="",saveData.settings.colorAlgorithm[a]===colorAlgorithms[a]&&(selected="selected"),t+=`<option value="${colorAlgorithms[a]}" name="${colorAlgorithms[a]}" ${selected}>${colorAlgorithms[a]}</option>\n          `;return t+="\n      </select>"}function showSaveData(){$("saveDataTextarea").value=JSON.stringify(saveData)}function loadSaveData(t){try{var a=JSON.parse(t.value)}catch(t){return void toast('Invalid data structure<br><small style="font-weight:200"> '+t+"</small>","error")}if(a.data.length<=1)return toast("Invalid save code: no data","error","error");for(let t=0;t<a.data.length;t++)if(2!=a.data[t].length)return toast('Invalid save code <br><small style="font-weight:200">Data point '+(t+1)+" has invalid coordinates</small>","error");saveData=a,toast("Successfully loaded save code","success")}onmousedown=function(){mouseIsDown=!0},ontouchstart=function(){mouseIsDown=!0},onmouseup=function(){mouseIsDown=!1,dragging=-1,draggingPoint=-1},onmousemove=function(t){pointHandler(t)},ontouchmove=function(t){pointHandler(t.touches[0])},canvas.element.ondblclick=(t=>{removePointHandler(t)}),$("easeOption").oninput=function(){saveData.settings.ease=$("easeOption").value,save.set()},$("colorOption").oninput=function(){saveData.settings.colorAlgorithm=$("colorOption").value,colors=[];for(let t=0;t<saveData.data.length;t++)colors.push(window[saveData.settings.colorAlgorithm](t));save.set()},oninput=(t=>{let a=t.target.getAttribute("id");saveData.settings.show[a]=!saveData.settings.show[a],save.set()}),$("animationSpeed").value=1e3*saveData.settings.speed,$("colorOptionWrapper").innerHTML=getColorSelectHTML(),showSaveData();let playbtn=$("quickPlay"),buttonStates={play:'\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26">\n                    <polygon fill="#ffffff" class="play-btn__svg" points="9.33 6.69 9.33 19.39 19.3 13.04 9.33 6.69" />\n                <path fill="#ffffff" class="play-btn__svg"\n                    d="M26,13A13,13,0,1,1,13,0,13,13,0,0,1,26,13ZM13,2.18A10.89,10.89,0,1,0,23.84,13.06,10.89,10.89,0,0,0,13,2.18Z" />\n                    </svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"\n                    viewBox="0 0 267 267" style="enable-background:new 0 0 26 26;">\n                    <g>\n                        <path style="fill:#ffffff;"\n                            d="M135.977,271.953c75.097,0,135.977-60.879,135.977-135.977S211.074,0,135.977,0S0,60.879,0,135.977    S60.879,271.953,135.977,271.953z M135.977,21.756c62.979,0,114.22,51.241,114.22,114.22s-51.241,114.22-114.22,114.22    s-114.22-51.241-114.22-114.22S72.992,21.756,135.977,21.756z" />\n                        <path style="fill:#ffffff;"\n                            d="M110.707,200.114c7.511,0,13.598-6.086,13.598-13.598V83.174c0-7.511-6.086-13.598-13.598-13.598    c-7.511,0-13.598,6.086-13.598,13.598v103.342C97.109,194.028,103.195,200.114,110.707,200.114z" />\n                        <path style="fill:#ffffff;"\n                            d="M165.097,200.114c7.511,0,13.598-6.086,13.598-13.598V83.174c0-7.511-6.086-13.598-13.598-13.598    S151.5,75.663,151.5,83.174v103.342C151.5,194.028,157.586,200.114,165.097,200.114z" />\n                    </g>\n                </svg>'};playbtn.classList.contains("playing")?playbtn.innerHTML=buttonStates.play:playbtn.innerHTML=buttonStates.pause;